(function(){"use strict";var t={4816:function(t,s,e){var r=e(6369),a=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"app"}},[s("keep-alive",[s("router-view")],1)],1)},u=[],n={name:"App",components:{}},o=n,i=e(1001),l=(0,i.Z)(o,a,u,!1,null,null,null),c=l.exports,h=e(2631),d=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"UserProfile"}},["pending"===t.userDataFetchStatus?s("div",{staticClass:"preloader"},[t._v(" Загрузка... ")]):t._e(),"error"===t.userDataFetchStatus?s("div",{staticClass:"error"},[t._v(" Произошла ошибка! Возможно пользователя с id "+t._s(t.userId)+" не существует! ")]):t._e(),"success"===t.userDataFetchStatus?s("div",{staticClass:"profile"},[s("div",{staticClass:"profile__linkToUsers"},[s("router-link",{attrs:{to:"/"}},[t._v("Ко всем пользователям")])],1),s("div",{staticClass:"profile__top"},[s("span",{staticClass:"profile__top__avatar"},[s("UserAvatar",{attrs:{name:t.userData.username,width:150,height:150,fontSize:64}})],1),s("span",{staticClass:"profile__top__description"},[s("div",[s("span",[t._v("Имя: ")]),s("span",[t._v(t._s(t.userData.username))])]),s("div",[s("span",[t._v("Телефон: ")]),s("span",[t._v(t._s(t.userData.phone))])]),s("div",[s("span",[t._v("Email: ")]),s("span",[t._v(t._s(t.userData.email))])]),s("div",[s("span",[t._v("Веб-сайт: ")]),s("span",[t._v(t._s(t.userData.website))])]),s("div",[s("span",[t._v("Компания: ")]),s("span",[t._v(t._s(t.userData.company.name))])])])]),s("div",{staticClass:"profile__bottom"},[s("ProfileNav",{attrs:{route:t.route,selected:t.openedSection}}),s("div",{staticClass:"profile__bottom__contentWrapper"},["posts"===t.openedSection?s("div",[s("UserPosts",{attrs:{userId:t.userId,userName:t.userData.username}})],1):t._e(),"albums"===t.openedSection?s("div",[s("UserAlbums",{attrs:{userId:t.userId}})],1):t._e()])],1)]):t._e()])},p=[],m=function(){var t=this,s=t._self._c;return s("span",{style:t.avatarStyle,attrs:{id:"UserAvatar"}},[s("span",[t._v(t._s(t.nameFirstLetter))])])},g=[];const _=function(t){let s=0;for(let r=0;r<t.length;r++)s=t.charCodeAt(r)+((s<<5)-s);let e="#";for(let r=0;r<3;r++){let t=s>>8*r&255;e+=("00"+t.toString(16)).substr(-2)}return e};var v=_,b={name:"UserAvatar",props:{height:{type:Number,default:100},width:{type:Number,default:100},name:{type:String,default:"U"},fontSize:{type:Number,default:50}},computed:{nameFirstLetter(){return this.name[0]},avatarStyle(){return{height:`${this.height}px`,width:`${this.width}px`,"font-size":`${this.fontSize}px`,"background-color":v(this.name)}}},components:{}},S=b,f=(0,i.Z)(S,m,g,!1,null,null,null),P=f.exports,U=function(){var t=this,s=t._self._c;return s("div",{staticClass:"profile__nav",attrs:{id:"ProfileNav"}},[s("router-link",{class:"posts"===t.selected?"selected":"",attrs:{to:t.route+"?page=posts"}},[s("span",[t._v("Посты")])]),s("router-link",{class:"albums"===t.selected?"selected":"",attrs:{to:t.route+"?page=albums"}},[s("span",[t._v("Альбомы")])])],1)},I=[],A={name:"ProfileNav",props:{selected:{type:String,default:"posts"},route:{type:String}}},F=A,y=(0,i.Z)(F,U,I,!1,null,null,null),x=y.exports,C=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"UserAlbums"}},["pending"===t.usersAlbumsFetchStatus?s("div",{staticClass:"preloader"},[t._v(" Загрузка... ")]):t._e(),"error"===t.usersAlbumsFetchStatus?s("div",{staticClass:"error"},[t._v(" Произошла ошибка! Возможно пользователь еще ничего не писал! ")]):t._e(),"success"===t.usersAlbumsFetchStatus?s("div",{staticClass:"albumsWrapper"},t._l(t.userAlbums,(function(e){return s("SingleAlbum",{key:e.id,attrs:{album:e,userName:t.userName}})})),1):t._e()])},D=[],w=function(){var t=this,s=t._self._c;return s("div",{staticClass:"singleAlbum",attrs:{id:"SingleAlbum"}},[s("div",{staticClass:"singleAlbum__title"},[t._v("Альбом: "+t._s(t.album.title))]),s("div",{staticClass:"singleAlbum__photosWrapper"},["pending"===t.albumFetchStatus?s("div",{staticClass:"singleAlbum__photosPreloader"},[t._v(" Загрузка... ")]):t._e(),"success"===t.albumFetchStatus?s("div",[s("PhotoSlider",{attrs:{photos:t.albumPhotos}})],1):t._e()])])},$=[],k=function(){var t=this,s=t._self._c;return s("div",{staticClass:"photoSlider",attrs:{id:"PhotoSlider"}},[s("span",{staticClass:"photoSlider__arrows",on:{click:t.previous}},[t._v("<")]),s("img",{staticClass:"photoSlider__sideImage",attrs:{src:t.photos[t.currIndexArr[0]].url,alt:""},on:{click:function(s){return t.setCurrImageIndex.call({},t.currIndexArr[0])}}}),s("img",{staticClass:"photoSlider__sideImage",attrs:{src:t.photos[t.currIndexArr[1]].url,alt:""},on:{click:function(s){return t.setCurrImageIndex.call({},t.currIndexArr[1])}}}),s("span",[s("img",{staticClass:"photoSlider___centralImage",attrs:{src:t.photos[t.currIndexArr[2]].url,alt:""}}),s("p",[t._v(t._s(t.currIndexArr[2]+1)+": "+t._s(t.photos[t.currImageIndex].title))])]),s("img",{staticClass:"photoSlider__sideImage",attrs:{src:t.photos[t.currIndexArr[3]].url,alt:""},on:{click:function(s){return t.setCurrImageIndex.call({},t.currIndexArr[3])}}}),s("img",{staticClass:"photoSlider__sideImage",attrs:{src:t.photos[t.currIndexArr[4]].url,alt:""},on:{click:function(s){return t.setCurrImageIndex.call({},t.currIndexArr[4])}}}),s("span",{staticClass:"photoSlider__arrows",on:{click:t.next}},[t._v(">")])])},Z=[],N={name:"PhotoSlider",props:{photos:{type:Array}},data(){return{currImageIndex:0}},computed:{maxIndex(){return this.photos.length-1},currIndexArr(){return[this.calculateIndex(-2),this.calculateIndex(-1),this.currImageIndex,this.calculateIndex(1),this.calculateIndex(2)]}},methods:{calculateIndex(t){const s=this.currImageIndex+t;return s<0?this.maxIndex- -s+1:s>this.maxIndex?0+s-this.maxIndex-1:s},setCurrImageIndex(t){this.currImageIndex=t},next(){this.currImageIndex=this.currIndexArr[3]},previous(){this.currImageIndex=this.currIndexArr[1]}}},O=N,j=(0,i.Z)(O,k,Z,!1,null,null,null),B=j.exports,z={name:"SingleAlbum",props:{album:{type:Object}},components:{PhotoSlider:B},computed:{albumPhotos(){return this.$store.getters.getAlbumsPhotosById(this.album.id)},albumFetchStatus(){return this.$store.getters.getAlbumsPhotosFetchStatusById(this.album.id)}},async mounted(){await this.$store.dispatch("fetchAlbumPhotos",this.album.id)}},T=z,W=(0,i.Z)(T,w,$,!1,null,null,null),E=W.exports,L={name:"UserAlbums",props:{userId:{type:String},userName:{type:String}},components:{SingleAlbum:E},computed:{usersAlbumsFetchStatus(){return this.$store.getters.getUserAlbumsFetchStatus},userAlbums(){return this.$store.getters.getUserAlbums}},async mounted(){await this.$store.dispatch("fetchUserAlbums",this.userId)}},q=L,M=(0,i.Z)(q,C,D,!1,null,null,null),R=M.exports,G=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"UserPosts"}},["pending"===t.usersPostsFetchStatus?s("div",{staticClass:"preloader"},[t._v(" Загрузка... ")]):t._e(),"error"===t.usersPostsFetchStatus?s("div",{staticClass:"error"},[t._v(" Произошла ошибка! Возможно пользователь еще ничего не писал! ")]):t._e(),"success"===t.usersPostsFetchStatus?s("div",{staticClass:"postsWrapper"},t._l(t.userPosts,(function(e){return s("SinglePost",{key:e.id,attrs:{post:e,userName:t.userName}})})),1):t._e()])},H=[],J=function(){var t=this,s=t._self._c;return s("div",{staticClass:"singlePost",attrs:{id:"SinglePost"}},[s("div",{staticClass:"singlePost__title"},[s("span",[t._v(t._s(t.userName)+": ")]),s("span",[t._v(t._s(t.post.title))])]),s("div",{staticClass:"singlePost__content"},[t._v(t._s(t.post.body))])])},K=[],Q={name:"SinglePost",props:{userName:{type:String},post:{type:Object}}},V=Q,X=(0,i.Z)(V,J,K,!1,null,null,null),Y=X.exports,tt={name:"UserPosts",props:{userId:{type:String},userName:{type:String}},components:{SinglePost:Y},computed:{usersPostsFetchStatus(){return this.$store.getters.getUserPostsFetchStatus},userPosts(){return this.$store.getters.getUserPosts}},async mounted(){await this.$store.dispatch("fetchUserPosts",this.userId)}},st=tt,et=(0,i.Z)(st,G,H,!1,null,null,null),rt=et.exports,at={name:"UserProfile",components:{UserAvatar:P,ProfileNav:x,UserAlbums:R,UserPosts:rt},computed:{userId(){return this.$route.params.id},route(){return`/users/${this.userId}`},openedSection(){const t=this.$route.query.page;return t&&""!==t?t:"posts"},userDataFetchStatus(){return this.$store.getters.getUserDataFetchStatus},userData(){return this.$store.getters.getUserData}},async mounted(){await this.$store.dispatch("fetchUserData",this.userId)},watch:{async route(){this.$store.dispatch("fetchUserData",this.userId)}}},ut=at,nt=(0,i.Z)(ut,d,p,!1,null,null,null),ot=nt.exports,it=function(){var t=this,s=t._self._c;return s("div",{staticClass:"usersPage",attrs:{id:"AllUsers"}},["pending"===t.usersFetchStatus?s("div",[t._v("Загрузка...")]):t._e(),"success"===t.usersFetchStatus?s("div",{staticClass:"usersPage__content"},[s("h1",{staticClass:"usersPage__title"},[t._v("Список пользователей")]),s("div",{staticClass:"usersPage__wrapper"},t._l(t.users,(function(t){return s("UserCard",{key:t.id,attrs:{userData:t}})})),1)]):t._e(),"error"===t.usersFetchStatus?s("div",[t._v(" Произошла ошибка! Попробуйте обновить страницу или вернуться позже! ")]):t._e()])},lt=[],ct=function(){var t=this,s=t._self._c;return s("router-link",{attrs:{to:t.route}},[s("span",{attrs:{id:"UserCard"}},[s("UserAvatar",{attrs:{name:t.userData.username,height:150,width:150}}),s("span",{staticClass:"userName"},[t._v(t._s(t.userData.username))])],1)])},ht=[],dt={name:"UserCard",props:{userData:{type:Object,default(){return{}}}},computed:{route(){return`/users/${this.userData.id}`}},components:{UserAvatar:P}},pt=dt,mt=(0,i.Z)(pt,ct,ht,!1,null,null,null),gt=mt.exports,_t={name:"AllUsers",computed:{usersFetchStatus(){return this.$store.getters.getUsersFetchStatus},users(){return this.$store.getters.getUsers}},data(){return{}},components:{UserCard:gt},async mounted(){await this.$store.dispatch("fetchUsers")}},vt=_t,bt=(0,i.Z)(vt,it,lt,!1,null,null,null),St=bt.exports;r.ZP.use(h.Z);let ft=new h.Z({routes:[{path:"/",component:St},{path:"/users/:id",component:ot}]});var Pt=ft,Ut=e(3822),It=e(6265),At=e.n(It);const Ft=At().create({baseURL:"https://jsonplaceholder.typicode.com",timeout:1e3});var yt=Ft;const xt={getUsers:()=>yt.get("/users"),getUserDataById:t=>yt.get(`/users?id=${t}`),getUserPostsByUserId:t=>yt.get(`/posts?userId=${t}`),getUserAlbumsByUserId:t=>yt.get(`/albums?userId=${t}`),getPhotosByAlbumId:t=>yt.get(`/photos?albumId=${t}`)};var Ct=xt;const Dt={state:()=>({users:[],usersFetchStatus:"pending"}),mutations:{setUsers(t,s){t.users=s},setUsersFetchStatus(t,s){t.usersFetchStatus=s}},actions:{async fetchUsers({commit:t}){t("setUsersFetchStatus","pending");try{const s=await Ct.getUsers();t("setUsersFetchStatus","success"),t("setUsers",s.data)}catch(s){t("setUsersFetchStatus","error")}}},getters:{getUsers(t){return t.users},getUsersFetchStatus(t){return t.usersFetchStatus}}};var wt=Dt;const $t={state:()=>({userData:{},posts:[],albums:[],albumsPhotos:{},userDataFetchStatus:"pending",userPostsFetchStatus:"pending",userAlbumsFetchStatus:"pending"}),mutations:{reset(t){t.userData={},t.posts=[],t.albums=[],t.albumsPhotos={},t.userDataFetchStatus="pending",t.userPostsFetchStatus="pending",t.userAlbumsFetchStatus="pending"},setUserData(t,s){t.userData=s,t.posts=[],t.albums=[],t.albumsPhotos={},t.userPostsFetchStatus="pending",t.userAlbumsFetchStatus="pending"},setUserPosts(t,s){t.posts=s},setUserAlbums(t,s){t.albums=s,s.forEach((s=>{Object.keys(t.albumsPhotos).includes(s.id)||(t.albumsPhotos[s.id]={fetchStatus:"pending",albums:[]})}))},setUserDataFetchStatus(t,s){t.userDataFetchStatus=s},setUserPostsFetchStatus(t,s){t.userPostsFetchStatus=s},setUserAlbumsFetchStatus(t,s){t.userAlbumsFetchStatus=s},setSingleAlbumPhotos(t,{id:s,albumsPhotos:e}){const r={...t.albumsPhotos,[s]:{...t.albumsPhotos[s],photos:[...e]}};t.albumsPhotos=r},setSingleAlbumPhotosFetchStatus(t,{id:s,newStatus:e}){const r={...t.albumsPhotos,[s]:{...t.albumsPhotos[s],fetchStatus:e}};t.albumsPhotos=r}},actions:{async fetchUserData({commit:t},s){t("reset"),t("setUserDataFetchStatus","pending");try{const e=await Ct.getUserDataById(s);t("setUserDataFetchStatus","success"),t("setUserData",e.data[0])}catch(e){t("setUserDataFetchStatus","error")}},async fetchUserPosts({commit:t},s){t("setUserPostsFetchStatus","pending");try{const e=await Ct.getUserPostsByUserId(s);t("setUserPostsFetchStatus","success"),t("setUserPosts",e.data)}catch(e){t("setUserPostsFetchStatus","error")}},async fetchUserAlbums({commit:t},s){t("setUserAlbumsFetchStatus","pending");try{const e=await Ct.getUserAlbumsByUserId(s);t("setUserAlbumsFetchStatus","success"),t("setUserAlbums",e.data)}catch(e){t("setUserAlbumsFetchStatus","error")}},async fetchAlbumPhotos({commit:t},s){t("setSingleAlbumPhotosFetchStatus",{id:s,newStatus:"pending"});try{const e=await Ct.getPhotosByAlbumId(s);t("setSingleAlbumPhotosFetchStatus",{id:s,newStatus:"success"}),t("setSingleAlbumPhotos",{id:s,albumsPhotos:e.data})}catch(e){t("setSingleAlbumPhotosFetchStatus",{id:s,newStatus:"error"})}}},getters:{getUserData:t=>t.userData,getUserPosts:t=>t.posts,getUserAlbums:t=>t.albums,getUserDataFetchStatus:t=>t.userDataFetchStatus,getUserPostsFetchStatus:t=>t.userPostsFetchStatus,getUserAlbumsFetchStatus:t=>t.userAlbumsFetchStatus,getAlbumsPhotosById:t=>s=>Object.keys(t.albumsPhotos).includes(String(s))?t.albumsPhotos[s].photos:[],getAlbumsPhotosFetchStatusById:t=>s=>Object.keys(t.albumsPhotos).includes(String(s))?t.albumsPhotos[s].fetchStatus:"pending"}};var kt=$t;r.ZP.use(Ut.ZP);const Zt=new Ut.ZP.Store({modules:{users:wt,profile:kt}});var Nt=Zt;r.ZP.config.productionTip=!1,new r.ZP({render:t=>t(c),store:Nt,router:Pt}).$mount("#app")}},s={};function e(r){var a=s[r];if(void 0!==a)return a.exports;var u=s[r]={exports:{}};return t[r](u,u.exports,e),u.exports}e.m=t,function(){var t=[];e.O=function(s,r,a,u){if(!r){var n=1/0;for(c=0;c<t.length;c++){r=t[c][0],a=t[c][1],u=t[c][2];for(var o=!0,i=0;i<r.length;i++)(!1&u||n>=u)&&Object.keys(e.O).every((function(t){return e.O[t](r[i])}))?r.splice(i--,1):(o=!1,u<n&&(n=u));if(o){t.splice(c--,1);var l=a();void 0!==l&&(s=l)}}return s}u=u||0;for(var c=t.length;c>0&&t[c-1][2]>u;c--)t[c]=t[c-1];t[c]=[r,a,u]}}(),function(){e.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(s,{a:s}),s}}(),function(){e.d=function(t,s){for(var r in s)e.o(s,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:s[r]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)}}(),function(){var t={143:0};e.O.j=function(s){return 0===t[s]};var s=function(s,r){var a,u,n=r[0],o=r[1],i=r[2],l=0;if(n.some((function(s){return 0!==t[s]}))){for(a in o)e.o(o,a)&&(e.m[a]=o[a]);if(i)var c=i(e)}for(s&&s(r);l<n.length;l++)u=n[l],e.o(t,u)&&t[u]&&t[u][0](),t[u]=0;return e.O(c)},r=self["webpackChunkvpolis"]=self["webpackChunkvpolis"]||[];r.forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r))}();var r=e.O(void 0,[998],(function(){return e(4816)}));r=e.O(r)})();
//# sourceMappingURL=app.50c17897.js.map